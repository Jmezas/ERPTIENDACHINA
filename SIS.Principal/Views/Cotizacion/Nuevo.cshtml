
@{
    ViewBag.Title = "nuevo";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="app-page-title">
    <div class="row">
        <div class="col-12">
            <h4>
                <i style="margin-right:7px" class="fa fa-file"></i> REGISTRO DE COTIZACIÓN
            </h4>
        </div>
        <nav class="col-12" aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><i class="fa fa-home"></i> <a href="@Url.Action("Principal", "Seguridad")">Principal</a></li>
                <li class="breadcrumb-item"><i class="fa fa-file"></i> <a href="@Url.Action("lista", "Cotizacion")">Lista Cotizaciones</a></li>
                <li class="breadcrumb-item active" aria-current="page"><i class="fa fa-file"></i> Cotización</li>
            </ol>
        </nav>
    </div>

    <div class="row">
        <div class="col-lg-5">
            <div class="main-card mb-3 card">
                <div class="card-body">

                    <div class="form-row">
                        <div class="col-lg-6 col-12" hidden>
                            <label>Fecha registro</label>
                            <div class="form-group">
                                <div class="input-group">
                                    <input type="text" class="form-control" id="dFechare" name="dFechare">
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-12 col-12">
                            <label>Fecha Atención</label>
                            <div class="form-group">
                                <div class="input-group">
                                    <input type="text" class="form-control form-control-sm col-lg-6 col-12" id="dFechaAten" name="dFechaAten">
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <label>Nro Serie</label>
                            <div class="form-group">
                                <div class="input-group">
                                    <input type="text" class="form-control form-control-sm" id="txtSerie" name="txtSerie" disabled>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <label>N°</label>
                            <div class="form-group">
                                <div class="input-group">
                                    <input type="text" class="form-control form-control-sm" id="txtNumero" name="txtNumero" disabled>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <label>Moneda</label>
                            <div class="form-group">
                                <div class="input-group">
                                    <select type="text" class="form-control form-control-sm" id="lstMoneda" name="lstMoneda"></select>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <label>Forma Pago</label>
                            <div class="form-group">
                                <div class="input-group">
                                    <select type="text" class="form-control form-control-sm" id="lstTipoPago" name="lstTipoPago"></select>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-12">
                            <label>Fecha Pago</label>
                            <div class="form-group">
                                <div class="input-group">
                                    <input type="text" class="form-control" id="dFechaPago" name="dFechaPago" disabled>
                                    <div class="input-group-addon">
                                        <span class="glyphicon glyphicon-th"></span>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-7">
            <div class="main-card mb-3 card">
                <div class="card-body">
                    <h6 class="c-grey-900">Información del Cliente</h6>
                    <hr />
                    <div class="form-row">

                        <div class="col-lg-4 col-md-4 col-sm-4 col-12">
                            <div class="form-group">
                                <input type="hidden" id="hdfId" value="0">
                                <label>Tipo Doc. de Identidad <b class="obl">(*)</b></label>
                                <select id="lstTipoDoc" name="lstTipoDoc" class="form-control "></select>
                            </div>
                        </div>
                        <div class="col-lg-8 col-md-8 col-sm-8 col-12">
                            <div class="form-group">
                                <label>Número de Documento de Identidad <b class="obl">(*)</b></label>
                                <div class="input-group">
                                    <input type="hidden" id="idCliente">
                                    <input id="txtDocCli" type="text" class="form-control input-sm no-null ui-autocomplete-input" name="txtDocCli" placeholder="Ingrese Nombre o Documento....." autocomplete="off">
                                    <div class="input-group-append">
                                        <a href="/Mantenimiento/Cliente" id="aAgregarCliente" class="btn btn-outline-secondary"><i class="fa fa-plus-circle"></i> Agregar Cliente</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-12">
                            <div class="form-group">
                                <label>Apellidos y Nombres, Denominación o Razón Social</label>
                                <input id="txtNomCli" name="txtNomCli" class="form-control input-sm no-null" disabled="">
                            </div>
                        </div>
                        <div class="col-lg-12">
                            <div class="form-group">
                                <label>Dirección</label>
                                <input id="txtDireccionInicio" name="txtDireccionInicio" class="form-control input-sm">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-12">
            <div class="main-card mb-3 card">
                <div class="card-body">
                    <h6 class="c-grey-900">Detalle</h6>
                    <hr />
                    <div class="form-row">
                        <input type="hidden" id="hdfprecio">
                        <input type="hidden" id="hdf_TotalImporte" />
                        <input type="hidden" id="txtreal" />
                        <div class="col-lg-4 col-md-4 col-sm-4 col-12">
                            <div class="form-group">
                                <label> Producto<b class="obl">(*)</b></label>
                                <div class="input-group">
                                    <input type="hidden" id="IdProducto">
                                    <input type="hidden" id="sCodigo">
                                    <input type="hidden" id="sCategoria">
                                    <input type="hidden" id="sMarca">
                                    <input type="hidden" id="sUnidad">
                                    <input id="txtProducto" type="text" class="form-control ui-autocomplete-input" name="txtProducto" placeholder="Ingrese Producto....." autocomplete="off">
                                    <div class="input-group-append">
                                        <button id="btnbuscar" class="btn btn-outline-secondary" data-toggle="modal" data-target="#ModalProducto"><i class="fa fa-plus-circle"></i> Buscar Producto</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-1 col-md-1 col-sm-1 col-12">
                            <div class="form-group">
                                <label>Precio <b class="obl">(*)</b></label>
                                <input type="text" class="form-control" id="txtPrecio" name="txtPrecio">
                            </div>
                        </div>
                        <div class="col-lg-1 col-md-1 col-sm-1 col-12">
                            <div class="form-group">
                                <label>Cantidad <b class="obl">(*)</b></label>
                                <input type="text" class="form-control" id="txtCantidad" name="txtCantidad">
                            </div>
                        </div>

                        <div class="col-lg-2 col-md-2 col-sm-2 col-12">
                            <div class="form-group">
                                <label>Descuento %</label>
                                <input id="txtDescuentoPor" type="text" class="form-control" name="txtDescuentoPor">
                            </div>
                        </div>
                        <div class="col-lg-2 col-md-2 col-sm-2 col-12">
                            <div class="form-group">
                                <label>Descuento</label>
                                <input id="txtDescuento" type="text" class="form-control" name="txtDescuento">
                            </div>
                        </div>
                        <div class="col-lg-2 col-md-2 col-sm-2 col-12">
                            <div class="form-group">
                                <label>Total</label>
                                <input id="txtTotal" type="text" class="form-control" name="txtTotal" disabled>
                            </div>
                        </div>
                        <div class="col-lg-12">
                            <div class="form-group">
                                <input type="hidden" id="Count">
                                <button type="button" class="btn btn-success" id="btnAgregar"><i class="fa fa-calculator"></i> Agregar</button>
                                <i class="fa fa-arrow-circle-down"></i>
                            </div>
                        </div>
                        <div class="col-lg-12">
                            <div class="table-responsive">
                                <table class="table table-bordered display" id="tbDetalle">
                                    <thead>
                                        <tr>
                                            <th>Código</th>
                                            <th>Producto</th>
                                            <th>Unidad</th>
                                            <th>Operación</th>
                                            <th>Descuento(%)</th>
                                            <th>Descuento</th>
                                            <th>Cantidad</th>
                                            <th>Precio</th>
                                            <th>Importe</th>
                                            <th>Acciones</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td colspan="12">No existen registros</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="col-12" id="IdIgvvi">
                                <div class="form-group caj-check">
                                    <div class="checkbox checkbox-circle checkbox-info peers ai-c">
                                        <input type="checkbox" id="CalIGV" name="CalIGV" class="peer" onchange="mostrarMensaje();" checked="">
                                        <label for="inputCall1" class="peers peer-greed js-sb ai-c"><span class="peer peer-greed">Precios incluyen IGV</span></label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-4">
            <div class="main-card mb-3 card">
                <div class="card-body">
                    <div class="form-row">
                        <div class="col-lg-12">
                            <h6 class="c-grey-900">Observación</h6>
                            <hr>
                            <div class="form-group">
                                <textarea id="txtObservacion" class="form-control" rows="6"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-8">
            <div class="main-card mb-3 card">
                <div class="card-body">
                    <h6>Totales</h6>
                    <hr>
                    <div class="form-row">

                        <div class="col-lg-8">
                            <div class="form-group">
                                <h5>Cantidad</h5>
                            </div>
                            <div class="form-group">
                                <h5>Ope. Gravada</h5>
                            </div>
                            <div class="form-group">
                                <h5>Ope. Exonerada</h5>
                            </div>
                            <div class="form-group">
                                <h5>Ope. Inafecta</h5>
                            </div>
                            <div class="form-group">
                                <h5>Descuento</h5>
                            </div>
                            <div class="form-group">
                                <h5>I.G.V.</h5>
                            </div>
                            <div class="form-group">
                                <h5>Monto total</h5>
                            </div>
                            <div class="form-group">
                                <h5>Moneda</h5>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="form-group">
                                <h5 id="mCant">0.00</h5>
                            </div>
                            <div class="form-group">
                                <h5 id="MontoSubtotal">0.00</h5>
                                <input type="hidden" id="subtotales">
                            </div>
                            <div class="form-group">
                                <h5 id="Montoexonerada">0.00</h5>
                                <input type="hidden" id="exonerada">
                            </div>
                            <div class="form-group">
                                <h5 id="Montoinafecta">0.00</h5>
                                <input type="hidden" id="inafecta">
                            </div>
                            <div class="form-group">
                                <h5 id="Montodescuento">0.00</h5>
                                <input type="hidden" id="descuento">
                            </div>
                            <div class="form-group">
                                <h5 id="MontoIGV">0.00</h5>
                                <input type="hidden" id="igv">
                            </div>
                            <div class="form-group">
                                <h5 id="MontoCalulado">0.00</h5>
                                <input type="hidden" id="Totales">
                            </div>


                            <div class="form-group">
                                <h5 id="hMonedaComprobante">SOLES</h5>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-12">
            <div class="col-lg-12">
                <div class="form-group pull-right">
                    <button class="btn btn-success  btn-lg" id="btnGuardar"><i class="fa fa-save"></i> Guardar</button>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade animate__animated animate__fadeInDown" id="ModalProducto" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" ata-controls-modal="your_div_id" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title"> Lista de productos</h5>
                <button type="button" class="close animate__animated animate__fadeOutUp" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-lg-12 col-12">
                        <div class="table-responsive">
                            <table class="table table-striped table-bordered" cellspacing="0" style="width:100%" id="tbMaterial">
                                <thead>
                                    <tr>
                                        <th>Tipo</th>
                                        <th>Código</th>
                                        <th>Nombre</th>
                                        <th>Unidad</th>
                                        <th>Marca</th>
                                        <th>Modelo</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
                        <button class="btn btn-primary" id="btnAceptar"> Agregar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


@section scripts {
    <script type="text/javascript" src="~/assets/scripts/page/Cotizacion/Nuevo.js"></script>
}